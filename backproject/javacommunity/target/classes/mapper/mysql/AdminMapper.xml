<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.best.mapper.AdminMapper">
    <resultMap id="BaseResultMap" type="com.best.entity.Admin">
        <id property="id" column="id" jdbcType="INTEGER"/>
        <result property="adminId" column="admin_id" jdbcType="VARCHAR"/>
        <result property="name" column="name" jdbcType="VARCHAR"/>
        <result property="password" column="password" jdbcType="VARCHAR"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
        <result property="deleted" column="deleted" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Base_Column_List">
        admin_id
        ,`name`, password, create_time, update_time, deleted
    </sql>
    <sql id="Base_Condition_List">
        <where>
            <if test="adminId != null and adminId != ''">
                and admin_id = #{adminId},
            </if>
            <if test="name != null and name != ''">
                and `name` = #{name},
            </if>
            <if test="startTime != null and startTime != ''">
                and createTime >= #{startTime},
            </if>
            <if test="endTime != null and endTime != ''">
                and createTime &lt; #{endTime}
            </if>
        </where>
    </sql>

    <update id="batchDeleteAdminById">
        <foreach collection="list" item="item" separator=";" index="index">
            update admin
            <set>
                deleted = #{deleted}
            </set>
            <where>
                admin_id = #{adminId}
            </where>
        </foreach>
    </update>
    <update id="batchUpdateAdminById">
        <foreach collection="list" item="item" separator=";" index="index">
            update admin
            <set>
                name = #{name}, password = #{password}
            </set>
            <where>
                admin_id = #{adminId}
            </where>
        </foreach>
    </update>
    <insert id="batchInsertByAdminList">
        insert into admin (<include refid="Base_Column_List"/>) values
        <foreach collection="list" item="item" separator="," index="index">
            (#{item.adminId}, #{item.name}, #{item.password})
        </foreach>
    </insert>
    <select id="aminList" resultType="com.best.entity.Admin">
        select
        <include refid="Base_Column_List"/>
        from admin;
    </select>
    <select id="selectAdminByCondition" resultType="com.best.entity.Admin">
        select
        <include refid="Base_Column_List"/>
        from admin
        <include refid="Base_Condition_List"/>
    </select>
</mapper>
